(this["webpackJsonpmove-app-dashboard"]=this["webpackJsonpmove-app-dashboard"]||[]).push([[0],{110:function(e,t,a){e.exports=a(154)},115:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){},154:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(47),o=a.n(r),c=(a(115),a(116),a(12)),i=a(13),s=a(16),d=a(14),u=a(15),m=a(45),p=(a(117),function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"Sidebar"},l.a.createElement("nav",null,l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(m.b,{to:"/routes"},"Routes")),l.a.createElement("li",null,"Stops",l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(m.b,{to:"/stops/add"},"Add Stops")),l.a.createElement("li",null,l.a.createElement(m.b,{to:"/stops/all"},"View All")))),l.a.createElement("li",null,"Drivers",l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(m.b,{to:"/drivers/add"},"Add Drivers")),l.a.createElement("li",null,l.a.createElement(m.b,{to:"/drivers/all"},"View All")))))))}}]),t}(l.a.Component)),E=a(67),h=a(81),v={addStops:"https://move-270018.appspot.com/stops"},b=a(37),g=a(88),f=a.n(g);function y(e){return function(t){t({type:"UPDATE_ADD_STOP_FORM",payload:e})}}var O={width:"100%",height:"457px",maxWidth:"100%",position:"relative",marginBottom:"60px"},C=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={showingInfoWindow:!1,activeMarker:{},selectedPlace:{},currentMarker:{stopName:"",longitude:0,latitude:0},markers:[{name:"Karachi",position:{lat:24.8607,lng:67.0011}}]},a.onMarkerDragEnd=function(e,t){var n=Object(E.a)(a),l=e.latLng,r=l.lat(),o=l.lng();console.log({lat:r,lng:o},e);var c=new a.props.google.maps.Geocoder,i="";c.geocode({location:{lat:r,lng:o}},(function(e,t){"OK"===t?e[0]?(i=e[0].formatted_address,n.setState({currentMarker:{stopName:i,lat:r,lng:o}}),n.props.updateStopForm({stopName:i,longitude:o,latitude:r})):window.alert("No results found"):window.alert("Geocoder failed due to: "+t)}))},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{id:"google-map"},l.a.createElement("h1",null,"Google Map"),l.a.createElement(h.Map,{google:this.props.google,zoom:14,style:O,initialCenter:{lat:24.8607,lng:67.0011}},this.state.markers.map((function(t,a){return l.a.createElement(h.Marker,{draggable:!0,onDragend:function(t,n,l){return e.onMarkerDragEnd(l,a)},name:"Kenyatta International Convention Centre"})}))))}}]),t}(n.Component),j=Object(b.b)((function(e){return{stopName:e.stopName,longitude:e.longitude,latitude:e.latitude}}),{updateStopForm:y})(Object(h.GoogleApiWrapper)({apiKey:"AIzaSyBhf00nbG4F1CkTT5DT9_N8l4xHj6pFkYc"})(C)),A=a(1),N=a(68),S=a(32),I=a(7),k=a(76),x=a(102);function L(e){return l.a.createElement("tr",null,l.a.createElement("td",null,e.index),l.a.createElement("td",null,e.stop.stopAddress),l.a.createElement("td",null,e.stop.stopName),l.a.createElement("td",null,e.stop.latitude),l.a.createElement("td",null,e.stop.longitude),l.a.createElement("td",null,l.a.createElement("button",{onClick:function(t){e.updateStopForm({stopName:e.stop.stopName,longitude:e.stop.longitude,latitude:e.stop.latitude}),e.updateLastId(e.stop.stopId),console.log(e.stop.stopId)}},"Edit")))}var F=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"stop-table"},l.a.createElement("h2",null,"All stops"),l.a.createElement(x.a,{striped:!0,bordered:!0,hover:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"#"),l.a.createElement("th",null,"Stop Address"),l.a.createElement("th",null,"Stop Name"),l.a.createElement("th",null,"Lat"),l.a.createElement("th",null,"Long"),l.a.createElement("th",null))),l.a.createElement("tbody",null,"undefined"!==this.props.stops?this.props.stops.map((function(t,a){return l.a.createElement(L,{key:a,stop:t,index:a,updateLastId:e.props.updateLastId,updateStopForm:e.props.updateStopForm})})):l.a.createElement("tr",null,l.a.createElement("td",null,"Loading...")))))}}]),t}(l.a.Component),D=Object(b.b)(null,{updateStopForm:y})(F),G=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).updateLastId=function(e){a.setState({lastId:e})},a.onAddressChangeHandler=function(e){var t=e.currentTarget.value;a.setState({stopAddress:t})},a.submitHandler=function(e){var t=a.props,n=t.longitude,l=t.latitude,r=t.stopName,o=a.state.stopAddress,c=Math.max(0,a.props.stops.map((function(e){return e.stopId})).pop());a.props.addBusStop({stopId:c,longitude:n,latitude:l,stopName:r,stopAddress:o}),a.setState({stopAddress:""}),e.preventDefault()},a.state={stopAddress:"",lastId:0},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.getAllBusStops().then((function(t){return Math.max(0,e.props.stops.map((function(e){return e.stopId})).pop())})).then((function(t){e.setState({lastId:t})}))}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return l.a.createElement(N.a,{fluid:!0},l.a.createElement(S.a,null,l.a.createElement(I.a,{lg:12,md:12},l.a.createElement("h2",null,"Add Stop"))),l.a.createElement(S.a,null,l.a.createElement(I.a,{lg:12,md:12},l.a.createElement(A.a,{onSubmit:this.submitHandler,action:v.addRoutes},l.a.createElement(S.a,{className:"align-items-end"},l.a.createElement(I.a,{md:3},l.a.createElement(A.a.Group,{controlId:"stopAddress"},l.a.createElement(A.a.Label,null,"Stop Address"),l.a.createElement(A.a.Control,{type:"text",placeholder:"Stop Address",onChange:this.onAddressChangeHandler,value:this.state.stopAddress,required:"required"}))),l.a.createElement(I.a,{md:3},l.a.createElement(A.a.Group,{controlId:"stopName"},l.a.createElement(A.a.Label,null,"Stop Name"),l.a.createElement(A.a.Control,{type:"text",placeholder:"Stop Name",value:this.props.stopName}))),l.a.createElement(I.a,{md:3},l.a.createElement(A.a.Group,{controlId:"latitute"},l.a.createElement(A.a.Label,null,"Latitute"),l.a.createElement(A.a.Control,{type:"text",placeholder:"Latitute",value:this.props.latitude}))),l.a.createElement(I.a,{md:3},l.a.createElement(A.a.Group,{controlId:"latitute"},l.a.createElement(A.a.Label,null,"Longitude"),l.a.createElement(A.a.Control,{type:"text",placeholder:"Longitude",value:this.props.longitude})))),l.a.createElement(S.a,null,l.a.createElement(I.a,{md:3},l.a.createElement(A.a.Group,null,l.a.createElement(k.a,{type:"submit"},"Add Route"))))))),l.a.createElement(S.a,null,l.a.createElement(I.a,{md:12},l.a.createElement(D,{updateLastId:this.updateLastId,stops:this.props.stops}))))}}]),t}(n.Component),w=Object(b.b)((function(e){return{stopAddress:e.stopForm.stopAddress,stopName:e.stopForm.stopName,longitude:e.stopForm.longitude,latitude:e.stopForm.latitude,stops:e.stopForm.stops}}),{addBusStop:function(e){return function(t,a){var n=a();console.log(n),f()({headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},url:v.addStops,method:"POST",data:JSON.stringify(e)}).then((function(a){console.log(a),t({type:"ADD_BUS_STOP",payload:e})})).catch((function(e){return console.log(e)}))}},getAllBusStops:function(){return function(e){return f.a.get(v.addStops).then((function(e){return e.data.map((function(e){return e.properties}))})).then((function(t){console.log("stopsData",t),e({type:"GET_ALL_STOPS",payload:t})}))}}})(G),B=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"AddStops"},l.a.createElement("h1",{className:"page-title"},"Add Bus Stops"),l.a.createElement("div",{style:{height:"517px",position:"relative",marginBottom:"60px"}},l.a.createElement(j,null)),l.a.createElement(w,null))}}]),t}(l.a.Component),P=a(108),T=a(46),R=T.c({driverName:T.d().required(),lastName:T.d().required(),driverPhone:T.b().required(),cnic:T.d().required(),cnicExpiry:T.d().required(),file:T.a().required()}),_=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={loading:!1,thumb:void 0},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;e.file&&this.setState({loading:!0},(function(){var a=new FileReader;a.onloadend=function(){t.setState({loading:!1,thumb:a.result})},a.readAsDataURL(e.file)}))}},{key:"render",value:function(){var e=this.props.file,t=this.state,a=t.loading,n=t.thumb;return e?a?l.a.createElement("p",null,"loading..."):l.a.createElement("img",{src:n,alt:e.name,className:"img-thumbnail mt-2",height:200,width:200}):null}}]),t}(l.a.Component),M=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement(P.a,{validationSchema:R,onSubmit:function(e,t){setTimeout((function(){alert(JSON.stringify(e,null,2)),t.setSubmitting(!1)}),1e3)},initialValues:{driverName:"",lastName:"",driverPhone:"",cnic:"",cnicExpiry:"",driverImage:null,licenseNo:"",emergencyContact:"",licenseExpiry:""}},(function(e){var t=e.handleSubmit,a=e.handleChange,n=(e.handleBlur,e.values),r=(e.touched,e.isValid,e.setFieldValue),o=e.errors;return l.a.createElement(A.a,{onSubmit:t},l.a.createElement(A.a.Control,{type:"hidden",placeholder:"driverRating",name:"driverRating",value:n.driverRating}),l.a.createElement(A.a.Row,null,l.a.createElement(A.a.Group,{as:I.a,md:"6",controlId:"validationFormik01"},l.a.createElement(A.a.Label,null,"Driver name"),l.a.createElement(A.a.Control,{type:"text",name:"driverName",value:n.driverName,onChange:a,isInvalid:!!o.driverName}),l.a.createElement(A.a.Control.Feedback,null,"Looks good!")),l.a.createElement(A.a.Group,{as:I.a,md:"6",controlId:"validationFormik02"},l.a.createElement(A.a.Label,null,"Driver Phone"),l.a.createElement(A.a.Control,{type:"text",name:"driverPhone",placeholder:"03001234567",value:n.driverPhone,onChange:a,isInvalid:!!o.driverPhone}),l.a.createElement(A.a.Control.Feedback,null,"Looks good!"))),l.a.createElement(A.a.Row,null,l.a.createElement(A.a.Group,{as:I.a,md:"6",controlId:"cnic"},l.a.createElement(A.a.Label,null,"CNIC"),l.a.createElement(A.a.Control,{type:"text",placeholder:"41010-1234567-1","aria-describedby":"inputGroupPrepend",name:"cnic",value:n.cnic,onChange:a,isInvalid:!!o.cnic}),l.a.createElement(A.a.Control.Feedback,{type:"invalid"},o.cnic)),l.a.createElement(A.a.Group,{as:I.a,md:"6",controlId:"validationFormicnicExpiry"},l.a.createElement(A.a.Label,null,"CNIC Expiry Date"),l.a.createElement(A.a.Control,{type:"text",placeholder:"06/2022",name:"cnicExpiry",value:n.cnicExpiry,onChange:a,isInvalid:!!o.cnicExpiry}),l.a.createElement(A.a.Control.Feedback,{type:"invalid"},o.cnicExpiry))),l.a.createElement(A.a.Row,null,l.a.createElement(A.a.Group,{as:I.a,md:"6",controlId:"validationFormik02"},l.a.createElement(A.a.Label,null,"Emergency Contact"),l.a.createElement(A.a.Control,{type:"text",name:"emergencyContact",placeholder:"03001234567",value:n.emergencyContact,onChange:a,isInvalid:!!o.emergencyContact}),l.a.createElement(A.a.Control.Feedback,null,"Looks good!")),l.a.createElement(A.a.Group,{as:I.a,md:"6",controlId:"validationFormik05"},l.a.createElement(A.a.Label,null,"Blood Group"),l.a.createElement(A.a.Control,{as:"select",name:"BloodGroup",value:n.BloodGroup,onChange:a,isInvalid:!!o.BloodGroup,custom:!0},l.a.createElement("option",null,"AB+"),l.a.createElement("option",null,"A+"),l.a.createElement("option",null,"A-"),l.a.createElement("option",null,"B+"),l.a.createElement("option",null,"B-"),l.a.createElement("option",null,"AB+"),l.a.createElement("option",null,"AB-"),l.a.createElement("option",null,"O+"),l.a.createElement("option",null,"O-")),l.a.createElement(A.a.Control.Feedback,{type:"invalid"},o.BloodGroup))),l.a.createElement(A.a.Row,null,l.a.createElement(A.a.Group,{as:I.a,md:"6",controlId:"validationFormik06"},l.a.createElement(A.a.Label,null,"License No."),l.a.createElement(A.a.Control,{type:"text",name:"licenseNo",placeholder:"123456789",value:n.licenseNo,onChange:a,isInvalid:!!o.licenseNo}),l.a.createElement(A.a.Control.Feedback,{type:"invalid"},o.licenseNo)),l.a.createElement(A.a.Group,{as:I.a,md:"6",controlId:"validationFormik06"},l.a.createElement(A.a.Label,null,"License Expiry"),l.a.createElement(A.a.Control,{type:"text",name:"licenseExpiry",placeholder:"06/2025",value:n.licenseExpiry,onChange:a,isInvalid:!!o.licenseExpiry}),l.a.createElement(A.a.Control.Feedback,{type:"invalid"},o.licenseExpiry))),l.a.createElement(A.a.Row,null,l.a.createElement(A.a.Group,{as:I.a,md:"12",controlId:"validationFormik06"},l.a.createElement(A.a.Label,null,"Driver Image"),l.a.createElement(A.a.Control,{type:"file",name:"driverImage",onChange:function(e){r("driverImage",e.currentTarget.files[0])},isInvalid:!!o.driverImage}),l.a.createElement(A.a.Control.Feedback,{type:"invalid"},o.driverImage),l.a.createElement(_,{file:n.file}))),l.a.createElement(k.a,{type:"submit"},"Submit form"))}))}}]),t}(l.a.Component),q=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"AddDrivers"},l.a.createElement(N.a,{fluid:!0},l.a.createElement(S.a,null,l.a.createElement(I.a,null,l.a.createElement("h1",null,"Add Drivers"))),l.a.createElement(S.a,null,l.a.createElement(I.a,{lg:6,md:12},l.a.createElement(M,null)))))}}]),t}(l.a.Component),H=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement("h1",null,"ViewAllDrivers")}}]),t}(l.a.Component),U=a(44);var V=function(){return l.a.createElement(m.a,null,l.a.createElement(p,null),l.a.createElement(U.c,null,l.a.createElement(U.a,{exact:!0,path:"/"},l.a.createElement("div",{className:"App"},l.a.createElement("div",{className:"content-main"},"Home"))),l.a.createElement(U.a,{exact:!0,path:"/stops/add"},l.a.createElement("div",{className:"App"},l.a.createElement("div",{className:"content-main"},l.a.createElement(B,null)))),l.a.createElement(U.a,{exact:!0,path:"/drivers/add"},l.a.createElement("div",{className:"App"},l.a.createElement("div",{className:"content-main"},l.a.createElement(q,null)))),l.a.createElement(U.a,{exact:!0,path:"/drivers/all"},l.a.createElement("div",{className:"App"},l.a.createElement("div",{className:"content-main"},l.a.createElement(H,null))))))},J=(a(153),a(41)),K=a(107),W=a(109),z=a(82),Y={stopId:0,stopName:"",stopAddress:"",longitude:0,latitude:0,stops:[]},Q=Object(J.c)({stopForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_ADD_STOP_FORM":return Object(z.a)({},e,{stopAddress:t.payload.stopAddress,stopName:t.payload.stopName,longitude:t.payload.longitude,latitude:t.payload.latitude});case"ADD_BUS_STOP":return console.log("Last ID",e),Object(z.a)({},e,{stopAddress:"",stopName:"",longitude:0,latitude:0,stops:[].concat(Object(W.a)(e.stops),[t.payload.stops])});case"GET_ALL_STOPS":return Object(z.a)({},e,{stops:t.payload});default:return e}}}),X=[K.a],Z=Object(J.e)(Q,{},Object(J.d)(J.a.apply(void 0,X)));o.a.render(l.a.createElement(b.a,{store:Z},l.a.createElement(V,null)),document.getElementById("root"))}},[[110,1,2]]]);
//# sourceMappingURL=main.6debd093.chunk.js.map